<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON Casino - Dice</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .dice-game-page {
            background: linear-gradient(135deg, #f8fbff 0%, #f0f7ff 100%);
            border-radius: 20px;
            padding: 24px;
            border: 1px solid rgba(42, 171, 238, 0.15);
        }

        .dice-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .dice-title {
            font-size: 24px;
            font-weight: 800;
            color: #1a1a1a;
        }

        .game-rules {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            border: 2px solid #e6f4ff;
        }

        .rules-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rules-icon {
            width: 20px;
            height: 20px;
            background: #2aabee;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%232aabee" d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .rules-list {
            list-style: none;
            padding-left: 0;
        }

        .rules-list li {
            padding: 4px 0;
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rules-list li:before {
            content: "‚Ä¢";
            color: #2aabee;
            font-weight: bold;
        }

        .dice-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 28px;
            perspective: 1000px;
            position: relative;
        }

        .dice {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transform-style: preserve-3d;
            transition: transform 1s ease-out;
            transform: rotateX(15deg) rotateY(15deg);
        }

        .dice-face {
            position: absolute;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            backface-visibility: hidden;
            box-shadow: 
                inset 0 0 20px rgba(255, 255, 255, 0.4),
                inset 0 0 0 1px rgba(255, 255, 255, 0.3),
                0 8px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .dots-container {
            width: 100%;
            height: 100%;
            padding: 20px;
            display: grid;
            gap: 12px;
        }

        .dot {
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            box-shadow: 
                0 3px 6px rgba(0, 0, 0, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.6),
                0 0 0 2px rgba(0, 0, 0, 0.1);
            justify-self: center;
            align-self: center;
        }

        /* –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≥—Ä–∞–Ω–µ–π */
        .face-1 { transform: translateZ(60px); }
        .face-2 { transform: rotateY(90deg) translateZ(60px); }
        .face-3 { transform: rotateX(90deg) translateZ(60px); }
        .face-4 { transform: rotateX(-90deg) translateZ(60px); }
        .face-5 { transform: rotateY(-90deg) translateZ(60px); }
        .face-6 { transform: rotateY(180deg) translateZ(60px); }

        /* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫ */
        .face-1 .dots-container { grid-template-columns: 1fr; grid-template-rows: 1fr; place-items: center; }
        .face-2 .dots-container { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
        .face-2 .dot:nth-child(1) { grid-column: 1; grid-row: 1; }
        .face-2 .dot:nth-child(2) { grid-column: 2; grid-row: 2; }
        .face-3 .dots-container { grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; }
        .face-3 .dot:nth-child(1) { grid-column: 1; grid-row: 1; }
        .face-3 .dot:nth-child(2) { grid-column: 2; grid-row: 2; }
        .face-3 .dot:nth-child(3) { grid-column: 3; grid-row: 3; }
        .face-4 .dots-container { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
        .face-4 .dot:nth-child(1) { grid-column: 1; grid-row: 1; }
        .face-4 .dot:nth-child(2) { grid-column: 2; grid-row: 1; }
        .face-4 .dot:nth-child(3) { grid-column: 1; grid-row: 2; }
        .face-4 .dot:nth-child(4) { grid-column: 2; grid-row: 2; }
        .face-5 .dots-container { grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; }
        .face-5 .dot:nth-child(1) { grid-column: 1; grid-row: 1; }
        .face-5 .dot:nth-child(2) { grid-column: 3; grid-row: 1; }
        .face-5 .dot:nth-child(3) { grid-column: 2; grid-row: 2; }
        .face-5 .dot:nth-child(4) { grid-column: 1; grid-row: 3; }
        .face-5 .dot:nth-child(5) { grid-column: 3; grid-row: 3; }
        .face-6 .dots-container { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; }
        .face-6 .dot:nth-child(1) { grid-column: 1; grid-row: 1; }
        .face-6 .dot:nth-child(2) { grid-column: 2; grid-row: 1; }
        .face-6 .dot:nth-child(3) { grid-column: 1; grid-row: 2; }
        .face-6 .dot:nth-child(4) { grid-column: 2; grid-row: 2; }
        .face-6 .dot:nth-child(5) { grid-column: 1; grid-row: 3; }
        .face-6 .dot:nth-child(6) { grid-column: 2; grid-row: 3; }

        .bet-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 14px;
            margin-bottom: 28px;
        }

        .bet-button {
            background: white;
            border: 2px solid #e6f4ff;
            border-radius: 16px;
            padding: 16px;
            font-size: 16px;
            font-weight: 700;
            color: #2aabee;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(42, 171, 238, 0.1);
        }

        .bet-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(42, 171, 238, 0.2);
            border-color: #2aabee;
        }

        .bet-button.active {
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            border-color: #2aabee;
            color: white;
            box-shadow: 0 6px 20px rgba(42, 171, 238, 0.3);
        }

        .play-button {
            width: 100%;
            padding: 22px;
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 20px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(42, 171, 238, 0.3);
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .play-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(42, 171, 238, 0.4);
        }

        .play-button:active {
            transform: translateY(-1px);
        }

        .play-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .play-icon {
            width: 24px;
            height: 24px;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M8 5v14l11-7z"/></svg>') no-repeat center;
            mask-size: contain;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        @keyframes roll {
            0% { transform: rotateX(0) rotateY(0) rotateZ(0); }
            25% { transform: rotateX(180deg) rotateY(90deg) rotateZ(45deg); }
            50% { transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg); }
            75% { transform: rotateX(540deg) rotateY(270deg) rotateZ(135deg); }
            100% { transform: var(--final-rotation); }
        }

        .rolling {
            animation: roll 1.2s linear forwards;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-panel">
            <button class="back-button" onclick="window.location.href='index.html'">
                <span class="back-icon"></span>
                –ù–∞–∑–∞–¥
            </button>
            <div class="balance-btn" onclick="window.location.href='payments.html'">
                <span class="balance-icon"></span>
                <span id="balanceAmount">1500 TON</span>
            </div>
        </div>

        <div class="content">
            <div class="dice-game-page">
                <div class="dice-header">
                    <h2 class="dice-title">Dice Game</h2>
                </div>

                <div class="game-rules">
                    <div class="rules-title">
                        <span class="rules-icon"></span>
                        –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
                    </div>
                    <ul class="rules-list">
                        <li>–°—Ç–∞–≤–∫–∞ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ 2x –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ</li>
                        <li>–í—ã–∏–≥—Ä—ã—à: –µ—Å–ª–∏ –≤—ã–ø–∞–¥–∞–µ—Ç 4, 5 –∏–ª–∏ 6</li>
                        <li>–ü—Ä–æ–∏–≥—Ä—ã—à: –µ—Å–ª–∏ –≤—ã–ø–∞–¥–∞–µ—Ç 1, 2 –∏–ª–∏ 3</li>
                        <li>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: 10 TON</li>
                    </ul>
                </div>

                <div class="dice-container">
                    <div class="dice" id="dice">
                        <!-- –ì—Ä–∞–Ω–∏ –∫—É–±–∏–∫–∞ -->
                        <div class="dice-face face-1"><div class="dots-container"><div class="dot"></div></div></div>
                        <div class="dice-face face-2"><div class="dots-container"><div class="dot"></div><div class="dot"></div></div></div>
                        <div class="dice-face face-3"><div class="dots-container"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
                        <div class="dice-face face-4"><div class="dots-container"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
                        <div class="dice-face face-5"><div class="dots-container"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
                        <div class="dice-face face-6"><div class="dots-container"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
                    </div>
                </div>

                <div class="bet-controls">
                    <button class="bet-button active" data-bet="10">10 TON</button>
                    <button class="bet-button" data-bet="50">50 TON</button>
                    <button class="bet-button" data-bet="100">100 TON</button>
                </div>

                <button class="play-button" id="playButton">
                    <span class="play-icon"></span>
                    –ö—Ä—É—Ç–∏—Ç—å –∫–æ—Å—Ç—å
                </button>
            </div>
        </div>
        
        <div class="bottom-nav">
            <div class="nav-item" onclick="window.location.href='index.html'">
                <div class="nav-icon game"></div>
                <div>–ì–ª–∞–≤–Ω–∞—è</div>
            </div>
            <div class="nav-item" onclick="window.location.href='stats.html'">
                <div class="nav-icon stats"></div>
                <div>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            </div>
            <div class="nav-item" onclick="window.location.href='payments.html'">
                <div class="nav-icon withdraw"></div>
                <div>–í—ã–≤–æ–¥</div>
            </div>
        </div>
    </div>

    <script src="common.js"></script>
    <script>
        // ==================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï DICE ====================
        let currentBet = 10;
        let isRolling = false;
        let dice = document.getElementById('dice');
        let playButton = document.getElementById('playButton');
        let betButtons = document.querySelectorAll('.bet-button');

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        function init() {
            updateBalanceDisplay();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ç–∞–≤–æ–∫
            betButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (isRolling) return;
                    betButtons.forEach(b => b.classList.remove('active'));
                    button.classList.add('active');
                    currentBet = parseInt(button.dataset.bet);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä—ã
            playButton.addEventListener('click', rollDice);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞
            const userAvatar = document.querySelector('.user-avatar');
            if (userAvatar && userAvatar.innerHTML === '') {
                userAvatar.innerHTML = '<div style="position: absolute; width: 100%; height: 100%; background: white; mask: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\') no-repeat center; mask-size: 24px;"></div>';
            }
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–æ—Å—Ç–∏
            dice.style.transform = 'rotateX(15deg) rotateY(15deg)';
        }

        function updateBalanceDisplay() {
            document.getElementById('balanceAmount').textContent = window.getBalance() + ' TON';
        }

        // üîß –ü–û–î–ö–†–£–¢–ö–ê: –†–µ–∞–ª—å–Ω—ã–π —à–∞–Ω—Å –≤—ã–∏–≥—Ä—ã—à–∞ 30% –≤–º–µ—Å—Ç–æ 33%
        function rollDice() {
            if (isRolling) return;
            if (window.getBalance() < currentBet) {
                window.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å.', 'lose');
                return;
            }
            
            isRolling = true;
            
            // üîß –ü–û–î–ö–†–£–¢–ö–ê: –†–µ–∞–ª—å–Ω—ã–π —à–∞–Ω—Å –≤—ã–∏–≥—Ä—ã—à–∞ 30% –≤–º–µ—Å—Ç–æ 33%
            const randomChance = Math.random();
            let result;
            let win;
            
            if (randomChance <= 0.30) { // 30% —à–∞–Ω—Å –Ω–∞ –≤—ã–∏–≥—Ä—ã—à
                // –í—ã–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: 5 –∏–ª–∏ 6
                result = Math.random() > 0.5 ? 5 : 6;
                win = true;
            } else { // 70% —à–∞–Ω—Å –Ω–∞ –ø—Ä–æ–∏–≥—Ä—ã—à
                // –ü—Ä–æ–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: 1, 2, 3 –∏–ª–∏ 4
                result = Math.floor(Math.random() * 4) + 1;
                win = false;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ—Å—Ç–∏
            const rotationMap = {
                1: 'rotateX(0deg) rotateY(0deg)',
                2: 'rotateY(-90deg)',
                3: 'rotateX(-90deg)',
                4: 'rotateX(90deg)',
                5: 'rotateY(90deg)',
                6: 'rotateY(180deg)'
            };
            
            dice.style.setProperty('--final-rotation', rotationMap[result]);
            dice.classList.add('rolling');
            
            setTimeout(() => {
                dice.classList.remove('rolling');
                dice.style.transform = rotationMap[result];
                
                if (win) {
                    const winAmount = currentBet * 2;
                    window.updateBalance(winAmount);
                    window.showNotification(`üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winAmount} TON!`, 'win');
                } else {
                    window.updateBalance(-currentBet);
                    window.showNotification(`–í—ã–ø–∞–ª–æ ${result}. –ü–æ–≤–µ–∑—ë—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑!`, 'lose');
                }
                
                updateBalanceDisplay();
                window.addToHistory('dice', currentBet, win, win ? 2 : 0);
                isRolling = false;
            }, 1200);
        }

        // ==================== –ó–ê–ü–£–°–ö ====================
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
