<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON Casino - Mines Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f4ff 100%);
            color: #1a1a1a;
            min-height: 100vh;
            padding: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 400px;
            width: 100%;
            background: #ffffff;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(42, 171, 238, 0.15);
            border: 1px solid rgba(42, 171, 238, 0.1);
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-panel {
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e6f4ff;
            background: white;
        }

        .balance-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border: none;
            border-radius: 12px;
            padding: 10px 16px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }

        .balance-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .balance-icon {
            width: 16px;
            height: 16px;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%234CAF50" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            padding: 24px;
        }

        .game-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: #2aabee;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: rgba(42, 171, 238, 0.08);
            transform: translateX(-3px);
        }

        .back-icon {
            width: 16px;
            height: 16px;
            background: #2aabee;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%232aabee" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .game-title {
            font-size: 24px;
            font-weight: 800;
            color: #1a1a1a;
            flex: 1;
        }

        /* –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã */
        .game-rules {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            border: 2px solid #e6f4ff;
            box-shadow: 0 4px 15px rgba(42, 171, 238, 0.1);
        }

        .rules-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rules-icon {
            width: 20px;
            height: 20px;
            background: #2aabee;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%232aabee" d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .rules-list {
            list-style: none;
            padding-left: 0;
        }

        .rules-list li {
            padding: 4px 0;
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rules-list li:before {
            content: "‚Ä¢";
            color: #2aabee;
            font-weight: bold;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã */
        .game-settings {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            border: 2px solid #e6f4ff;
            box-shadow: 0 4px 15px rgba(42, 171, 238, 0.1);
        }

        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .settings-row:last-child {
            margin-bottom: 0;
        }

        .settings-label {
            font-size: 14px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .settings-value {
            font-size: 14px;
            color: #666;
            font-weight: 600;
        }

        .mines-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #e6f4ff;
            border-radius: 3px;
            outline: none;
            margin: 12px 0;
        }

        .mines-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #2aabee;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(42, 171, 238, 0.3);
            border: 3px solid white;
        }

        .mines-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #2aabee;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(42, 171, 238, 0.3);
            border: 3px solid white;
        }

        .mines-display {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
        }

        .mine-indicator {
            width: 12px;
            height: 12px;
            background: #2aabee;
            border-radius: 50%;
            opacity: 0.3;
            position: relative;
        }

        .mine-indicator.active {
            opacity: 1;
            background: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .mine-indicator.active::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 11.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>') no-repeat center;
            mask-size: contain;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* –ü–æ–ª–µ –∏–≥—Ä—ã */
        .game-field {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            border: 2px solid #e6f4ff;
            box-shadow: 0 4px 15px rgba(42, 171, 238, 0.1);
        }

        .grid-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1a1a1a;
            text-align: center;
        }

        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .cell {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #f8fbff 0%, #f0f7ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e6f4ff;
            font-weight: 700;
            font-size: 14px;
            color: #2aabee;
            position: relative;
            overflow: hidden;
        }

        .cell:hover:not(.opened):not(.mine):not(.flag) {
            transform: scale(0.95);
            border-color: #2aabee;
            box-shadow: 0 4px 12px rgba(42, 171, 238, 0.2);
        }

        .cell.opened {
            background: white;
            border-color: #2aabee;
            color: #1a1a1a;
        }

        .cell.mine {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            border-color: #ff6b6b;
            color: white;
        }

        .cell.mine::before {
            content: '';
            position: absolute;
            width: 70%;
            height: 70%;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 11.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .cell.flag {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-color: #4CAF50;
            color: white;
        }

        .cell.flag::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .cell.gem {
            background: linear-gradient(135deg, #FFD700 0%, #FFC107 100%);
            border-color: #FFC107;
            color: white;
        }

        .cell.gem::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: white;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M16 9l4.371 1.749-1.619 4.232L16 13l-2.752 1.981L11.629 10.75 16 9zm-5.75 3.5L12 13.088l1.75-1.256L12 10.912l-1.75 1.256zM16 3l4 2v5l-4-2 4 2v5l-4-2 4 2v5l-4-2-4 2-4-2-4 2-4-2 4-2V5l4 2V3l4-2 4 2z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .cell.empty {
            background: white;
            border-color: #e6f4ff;
        }

        .cell.empty::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: #e6f4ff;
            mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23e6f4ff" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>') no-repeat center;
            mask-size: contain;
        }

        .cell.number-1 { color: #2aabee; }
        .cell.number-2 { color: #4CAF50; }
        .cell.number-3 { color: #ff6b6b; }
        .cell.number-4 { color: #9C27B0; }
        .cell.number-5 { color: #FF9800; }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–≥—Ä–µ */
        .game-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .info-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            border: 2px solid #e6f4ff;
            text-align: center;
        }

        .info-value {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .info-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        .multiplier {
            color: #4CAF50;
        }

        .potential-win {
            color: #2aabee;
        }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π */
        .game-controls {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .bet-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .bet-button {
            background: white;
            border: 2px solid #e6f4ff;
            border-radius: 16px;
            padding: 12px;
            font-size: 14px;
            font-weight: 700;
            color: #2aabee;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(42, 171, 238, 0.1);
        }

        .bet-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(42, 171, 238, 0.2);
            border-color: #2aabee;
        }

        .bet-button.active {
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            border-color: #2aabee;
            color: white;
            box-shadow: 0 6px 20px rgba(42, 171, 238, 0.3);
        }

        .control-button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .start-button {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .start-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .start-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .cashout-button {
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(42, 171, 238, 0.3);
        }

        .cashout-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(42, 171, 238, 0.4);
        }

        .cashout-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .flag-button {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.3);
            width: 50px;
        }

        .flag-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 152, 0, 0.4);
        }

        .flag-button.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
        }

        .control-icon {
            width: 20px;
            height: 20px;
            background: white;
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
        }

        .start-icon {
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M8 5v14l11-7z"/></svg>');
        }

        .cashout-icon {
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-6-7h3v-2h-3V8l-4 4 4 4v-3z"/></svg>');
        }

        .flag-icon {
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"/></svg>');
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: white;
            color: #1a1a1a;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 1000;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid #e6f4ff;
            font-size: 16px;
            text-align: center;
            min-width: 300px;
            max-width: 90vw;
        }

        .notification.win {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border-color: rgba(76, 175, 80, 0.3);
        }

        .notification.lose {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            color: white;
            border-color: rgba(255, 107, 107, 0.3);
        }

        .notification.info {
            background: linear-gradient(135deg, #2aabee 0%, #229ed9 100%);
            color: white;
            border-color: rgba(42, 171, 238, 0.3);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes cellReveal {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .cell.revealed {
            animation: cellReveal 0.3s ease-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes gemGlow {
            0% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0.7; transform: scale(1); }
        }

        .cell.gem::before {
            animation: gemGlow 1.5s ease-in-out infinite;
        }

        @keyframes minePulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        .cell.mine::before {
            animation: minePulse 1s ease-in-out infinite;
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 480px) {
            .content {
                padding: 16px;
            }
            
            .mines-grid {
                gap: 6px;
            }
            
            .game-controls {
                flex-direction: column;
            }
            
            .flag-button {
                width: 100%;
                order: -1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="top-panel">
            <button class="back-button" id="backButton">
                <span class="back-icon"></span>
                –ù–∞–∑–∞–¥
            </button>
            <button class="balance-btn" id="balanceButton">
                <span class="balance-icon"></span>
                <span id="balanceAmount">1,500 TON</span>
            </button>
        </div>

        <div class="content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã -->
            <div class="game-header">
                <h2 class="game-title">Mines Game</h2>
            </div>

            <!-- –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã -->
            <div class="game-rules">
                <div class="rules-title">
                    <span class="rules-icon"></span>
                    –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
                </div>
                <ul class="rules-list">
                    <li>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–ª–µ—Ç–∫–∏, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å</li>
                    <li>–ò–∑–±–µ–≥–∞–π—Ç–µ –º–∏–Ω - –æ–Ω–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç –∏–≥—Ä—É</li>
                    <li>–ß–µ–º –º–µ–Ω—å—à–µ –º–∏–Ω, —Ç–µ–º –≤—ã—à–µ –º–Ω–æ–∂–∏—Ç–µ–ª—å</li>
                    <li>–ó–∞–±–µ—Ä–∏—Ç–µ –≤—ã–∏–≥—Ä—ã—à –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç</li>
                    <li>–ú–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å —Ñ–ª–∞–∂–∫–∏ –Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –º–∏–Ω—ã</li>
                </ul>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã -->
            <div class="game-settings">
                <div class="settings-row">
                    <div class="settings-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω:</div>
                    <div class="settings-value" id="minesCount">3</div>
                </div>
                <input type="range" min="1" max="24" value="3" class="mines-slider" id="minesSlider">
                <div class="mines-display" id="minesDisplay">
                    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –º–∏–Ω –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
                
                <div class="settings-row">
                    <div class="settings-label">–ú–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞ –∫–ª–µ—Ç–∫—É:</div>
                    <div class="settings-value" id="multiplierPerCell">1.40x</div>
                </div>
                
                <div class="settings-row">
                    <div class="settings-label">–ë–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫:</div>
                    <div class="settings-value" id="safeCells">22</div>
                </div>
            </div>

            <!-- –ü–æ–ª–µ –∏–≥—Ä—ã -->
            <div class="game-field">
                <div class="grid-title">
                    <span id="cellsOpened">0</span> / <span id="totalCells">25</span> –∫–ª–µ—Ç–æ–∫ –æ—Ç–∫—Ä—ã—Ç–æ
                </div>
                <div class="mines-grid" id="minesGrid">
                    <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ 5x5 –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ JS -->
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–≥—Ä–µ -->
            <div class="game-info">
                <div class="info-card">
                    <div class="info-value multiplier" id="currentMultiplier">1.00x</div>
                    <div class="info-label">–¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å</div>
                </div>
                <div class="info-card">
                    <div class="info-value potential-win" id="potentialWin">0 TON</div>
                    <div class="info-label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à</div>
                </div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∞–º–∏ -->
            <div class="bet-controls">
                <button class="bet-button active" data-bet="10">10 TON</button>
                <button class="bet-button" data-bet="50">50 TON</button>
                <button class="bet-button" data-bet="100">100 TON</button>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π -->
            <div class="game-controls">
                <button class="control-button flag-button" id="flagButton">
                    <span class="control-icon flag-icon"></span>
                </button>
                <button class="control-button start-button" id="startButton">
                    <span class="control-icon start-icon"></span>
                    –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
                <button class="control-button cashout-button" id="cashoutButton" disabled>
                    <span class="control-icon cashout-icon"></span>
                    –ó–∞–±—Ä–∞—Ç—å
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let balance = parseInt(localStorage.getItem('balance')) || 1500;
        let currentBet = 10;
        let gameActive = false;
        let gameFinished = false;
        let minesCount = 3;
        let openedCells = 0;
        let totalCells = 25;
        let currentMultiplier = 1.0;
        let flagMode = false;
        let mines = [];
        let gridState = [];
        let gameStarted = false;
        
        // –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–´ –ú–ò–ù –ò–ó GetX (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ä–µ–∞–ª—å–Ω—ã–º –∫–∞–∑–∏–Ω–æ)
        // –î–ª—è –ø–æ–ª—è 5x5 (25 –∫–ª–µ—Ç–æ–∫), –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤ –º–∏–Ω
        const MULTIPLIERS = {
            1: 2.40,   // 1 –º–∏–Ω–∞ - –º–Ω–æ–∂–∏—Ç–µ–ª—å 2.40x –∑–∞ –∫–ª–µ—Ç–∫—É
            2: 2.00,   // 2 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 2.00x –∑–∞ –∫–ª–µ—Ç–∫—É
            3: 1.40,   // 3 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.40x –∑–∞ –∫–ª–µ—Ç–∫—É
            4: 1.25,   // 4 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.25x –∑–∞ –∫–ª–µ—Ç–∫—É
            5: 1.15,   // 5 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.15x –∑–∞ –∫–ª–µ—Ç–∫—É
            6: 1.10,   // 6 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.10x –∑–∞ –∫–ª–µ—Ç–∫—É
            7: 1.08,   // 7 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.08x –∑–∞ –∫–ª–µ—Ç–∫—É
            8: 1.06,   // 8 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.06x –∑–∞ –∫–ª–µ—Ç–∫—É
            9: 1.05,   // 9 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.05x –∑–∞ –∫–ª–µ—Ç–∫—É
            10: 1.04,  // 10 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.04x –∑–∞ –∫–ª–µ—Ç–∫—É
            11: 1.03,  // 11 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.03x –∑–∞ –∫–ª–µ—Ç–∫—É
            12: 1.03,  // 12 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.03x –∑–∞ –∫–ª–µ—Ç–∫—É
            13: 1.02,  // 13 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            14: 1.02,  // 14 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            15: 1.02,  // 15 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            16: 1.02,  // 16 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            17: 1.02,  // 17 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            18: 1.02,  // 18 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            19: 1.02,  // 19 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            20: 1.02,  // 20 –º–∏–Ω - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            21: 1.02,  // 21 –º–∏–Ω–∞ - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            22: 1.02,  // 22 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            23: 1.02,  // 23 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
            24: 1.02   // 24 –º–∏–Ω—ã - –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.02x –∑–∞ –∫–ª–µ—Ç–∫—É
        };
        
        // –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π —Å—Ö–µ–º–µ (–±–µ–∑ 35% —à–∞–Ω—Å–∞)
        // –í —Ä–µ–∞–ª—å–Ω–æ–º GetX –Ω–µ—Ç 35% —à–∞–Ω—Å–∞ - —Ç–∞–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ Mines
        
        // ==================== –≠–õ–ï–ú–ï–ù–¢–´ DOM ====================
        const balanceAmount = document.getElementById('balanceAmount');
        const backButton = document.getElementById('backButton');
        const balanceButton = document.getElementById('balanceButton');
        const minesSlider = document.getElementById('minesSlider');
        const minesCountEl = document.getElementById('minesCount');
        const minesDisplay = document.getElementById('minesDisplay');
        const multiplierPerCellEl = document.getElementById('multiplierPerCell');
        const safeCellsEl = document.getElementById('safeCells');
        const minesGrid = document.getElementById('minesGrid');
        const cellsOpenedEl = document.getElementById('cellsOpened');
        const totalCellsEl = document.getElementById('totalCells');
        const currentMultiplierEl = document.getElementById('currentMultiplier');
        const potentialWinEl = document.getElementById('potentialWin');
        const betButtons = document.querySelectorAll('.bet-button');
        const flagButton = document.getElementById('flagButton');
        const startButton = document.getElementById('startButton');
        const cashoutButton = document.getElementById('cashoutButton');
        
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        function init() {
            updateBalanceDisplay();
            setupEventListeners();
            updateMinesDisplay();
            updateMultiplierInfo();
            createGrid();
            updateGameInfo();
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ localStorage
            const savedGame = JSON.parse(localStorage.getItem('minesGame'));
            if (savedGame && savedGame.gameActive) {
                minesCount = savedGame.minesCount;
                currentBet = savedGame.currentBet;
                gameActive = savedGame.gameActive;
                gameStarted = savedGame.gameStarted;
                openedCells = savedGame.openedCells;
                currentMultiplier = savedGame.currentMultiplier;
                mines = savedGame.mines;
                gridState = savedGame.gridState;
                
                minesSlider.value = minesCount;
                updateMinesDisplay();
                updateMultiplierInfo();
                restoreGrid();
                updateGameState();
            }
        }
        
        // ==================== –°–û–ó–î–ê–ù–ò–ï –ò–ì–†–û–í–û–ì–û –ü–û–õ–Ø ====================
        function createGrid() {
            minesGrid.innerHTML = '';
            gridState = [];
            
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.dataset.state = 'hidden'; // hidden, opened, mine, flag
                
                cell.addEventListener('click', () => handleCellClick(i));
                cell.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    handleCellRightClick(i);
                });
                
                minesGrid.appendChild(cell);
                gridState.push({
                    index: i,
                    state: 'hidden',
                    isMine: false,
                    isFlag: false,
                    hasGem: Math.random() > 0.95 // 5% —à–∞–Ω—Å –∞–ª–º–∞–∑–∞ (—Ä–µ–¥–∫–æ)
                });
            }
            
            totalCellsEl.textContent = totalCells;
        }
        
        function restoreGrid() {
            minesGrid.innerHTML = '';
            
            for (let i = 0; i < totalCells; i++) {
                const cellData = gridState[i];
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.dataset.state = cellData.state;
                
                if (cellData.state === 'opened') {
                    cell.classList.add('opened');
                    if (cellData.isMine) {
                        cell.classList.add('mine');
                    } else if (cellData.hasGem) {
                        cell.classList.add('gem');
                    } else {
                        cell.classList.add('empty');
                    }
                } else if (cellData.state === 'flag') {
                    cell.classList.add('flag');
                } else if (cellData.state === 'mine') {
                    cell.classList.add('mine');
                }
                
                cell.addEventListener('click', () => handleCellClick(i));
                cell.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    handleCellRightClick(i);
                });
                
                minesGrid.appendChild(cell);
            }
            
            cellsOpenedEl.textContent = openedCells;
        }
        
        // ==================== –ì–ï–ù–ï–†–ê–¶–ò–Ø –ú–ò–ù ====================
        function generateMines(firstClickIndex) {
            mines = [];
            const availableCells = Array.from({ length: totalCells }, (_, i) => i);
            
            // –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –Ω–∞–∂–∞—Ç—É—é –∫–ª–µ—Ç–∫—É –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –º–∏–Ω
            // (–≤ GetX –ø–µ—Ä–≤–∞—è –∫–ª–µ—Ç–∫–∞ –≤—Å–µ–≥–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞)
            const firstClickIndexInArray = availableCells.indexOf(firstClickIndex);
            if (firstClickIndexInArray !== -1) {
                availableCells.splice(firstClickIndexInArray, 1);
            }
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –º–∏–Ω (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∫ –≤ GetX)
            for (let i = 0; i < minesCount; i++) {
                if (availableCells.length === 0) break;
                
                const randomIndex = Math.floor(Math.random() * availableCells.length);
                const mineIndex = availableCells[randomIndex];
                mines.push(mineIndex);
                availableCells.splice(randomIndex, 1);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–µ—Ç–∫–∏
                gridState[mineIndex].isMine = true;
                gridState[mineIndex].hasGem = false; // –í –º–∏–Ω–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–ª–º–∞–∑–∞
            }
            
            console.log('Generated mines:', mines);
        }
        
        // ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ====================
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥
            backButton.addEventListener('click', () => {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
                saveGameState();
                window.history.back();
            });
            
            // –ö–Ω–æ–ø–∫–∞ –±–∞–ª–∞–Ω—Å–∞
            balanceButton.addEventListener('click', () => {
                showNotification('–î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', 'info');
            });
            
            // –°–ª–∞–π–¥–µ—Ä –º–∏–Ω
            minesSlider.addEventListener('input', () => {
                minesCount = parseInt(minesSlider.value);
                minesCountEl.textContent = minesCount;
                updateMinesDisplay();
                updateMultiplierInfo();
                
                if (!gameActive) {
                    resetGame();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞–≤–æ–∫
            betButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (gameActive) return;
                    
                    betButtons.forEach(b => b.classList.remove('active'));
                    button.classList.add('active');
                    currentBet = parseInt(button.dataset.bet);
                    
                    if (currentBet > balance) {
                        showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'lose');
                        return;
                    }
                    
                    updatePotentialWin();
                });
            });
            
            // –ö–Ω–æ–ø–∫–∞ —Ñ–ª–∞–≥–∞
            flagButton.addEventListener('click', () => {
                if (!gameActive) {
                    showNotification('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É!', 'info');
                    return;
                }
                
                flagMode = !flagMode;
                flagButton.classList.toggle('active', flagMode);
                
                showNotification(flagMode ? '–†–µ–∂–∏–º —Ñ–ª–∞–≥–∞ –≤–∫–ª—é—á–µ–Ω' : '–†–µ–∂–∏–º —Ñ–ª–∞–≥–∞ –≤—ã–∫–ª—é—á–µ–Ω', 'info');
            });
            
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
            startButton.addEventListener('click', () => {
                if (gameActive) {
                    // –ï—Å–ª–∏ –∏–≥—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞, —Å–±—Ä–æ—Å
                    resetGame();
                    return;
                }
                
                if (currentBet > balance) {
                    showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'lose');
                    return;
                }
                
                startGame();
            });
            
            // –ö–Ω–æ–ø–∫–∞ –≤—ã–≤–æ–¥–∞
            cashoutButton.addEventListener('click', () => {
                if (!gameActive || !gameStarted) {
                    showNotification('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É!', 'info');
                    return;
                }
                
                cashout();
            });
        }
        
        // ==================== –õ–û–ì–ò–ö–ê –ò–ì–†–´ (–ö–ê–ö –í GetX) ====================
        function startGame() {
            if (gameActive) return;
            
            balance -= currentBet;
            updateBalanceDisplay();
            
            gameActive = true;
            gameStarted = false;
            gameFinished = false;
            openedCells = 0;
            currentMultiplier = 1.0;
            flagMode = false;
            
            // –°–±—Ä–æ—Å –ø–æ–ª—è
            createGrid();
            updateGameState();
            updatePotentialWin();
            
            startButton.innerHTML = '<span class="control-icon start-icon"></span>–°–±—Ä–æ—Å –∏–≥—Ä—ã';
            cashoutButton.disabled = false;
            flagButton.disabled = false;
            minesSlider.disabled = true;
            
            showNotification('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏', 'info');
        }
        
        function handleCellClick(cellIndex) {
            if (!gameActive || gameFinished) return;
            
            const cell = gridState[cellIndex];
            const cellElement = minesGrid.children[cellIndex];
            
            if (cell.state !== 'hidden') return;
            
            // –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫ - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–Ω (–≤ GetX –ø–µ—Ä–≤–∞—è –∫–ª–µ—Ç–∫–∞ –≤—Å–µ–≥–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞)
            if (!gameStarted) {
                generateMines(cellIndex);
                gameStarted = true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∏–Ω—É (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ GetX - –Ω–µ—Ç 35% —à–∞–Ω—Å–∞)
            if (cell.isMine) {
                // –ò–≥—Ä–æ–∫ –ø–æ–ø–∞–ª –Ω–∞ –º–∏–Ω—É - –∏–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è
                gameFinished = true;
                cell.state = 'mine';
                cellElement.classList.add('mine', 'opened', 'revealed');
                cellElement.dataset.state = 'mine';
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –º–∏–Ω—ã
                revealAllMines();
                
                // –û–±–Ω–æ–≤–∏—Ç—å UI
                updateGameState();
                endGame(false);
                return;
            }
            
            // –≠—Ç–æ –Ω–µ –º–∏–Ω–∞
            cell.state = 'opened';
            cellElement.classList.add('opened', 'revealed');
            cellElement.dataset.state = 'opened';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∫–ª–µ—Ç–∫–∏
            if (cell.hasGem) {
                cellElement.classList.add('gem');
                showNotification('üíé –ù–∞–π–¥–µ–Ω –∞–ª–º–∞–∑! –ú–Ω–æ–∂–∏—Ç–µ–ª—å +25%', 'info');
                currentMultiplier *= 1.25; // +25% –∑–∞ –∞–ª–º–∞–∑
            } else {
                cellElement.classList.add('empty');
            }
            
            openedCells++;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º GetX
            currentMultiplier *= MULTIPLIERS[minesCount];
            currentMultiplier = Math.round(currentMultiplier * 100) / 100;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫
            const maxSafeCells = totalCells - minesCount;
            if (openedCells >= maxSafeCells) {
                // –ò–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–ª –≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–ª–µ—Ç–∫–∏ - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à
                gameFinished = true;
                revealAllMines();
                updateGameState();
                
                const winAmount = Math.round(currentBet * currentMultiplier);
                balance += winAmount;
                updateBalanceDisplay();
                
                showNotification(`üéâ –í—ã –æ—Ç–∫—Ä—ã–ª–∏ –≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–ª–µ—Ç–∫–∏! –í—ã–∏–≥—Ä—ã—à: ${winAmount} TON!`, 'win');
                endGame(true);
                return;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å UI
            updateGameState();
            updatePotentialWin();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            cellElement.classList.add('pulse');
            setTimeout(() => cellElement.classList.remove('pulse'), 500);
        }
        
        function handleCellRightClick(cellIndex) {
            if (!gameActive || gameFinished) return;
            
            const cell = gridState[cellIndex];
            const cellElement = minesGrid.children[cellIndex];
            
            if (cell.state === 'opened') return;
            
            if (cell.state === 'hidden') {
                // –°—Ç–∞–≤–∏–º —Ñ–ª–∞–∂–æ–∫
                cell.state = 'flag';
                cell.isFlag = true;
                cellElement.classList.add('flag');
                cellElement.dataset.state = 'flag';
            } else if (cell.state === 'flag') {
                // –£–±–∏—Ä–∞–µ–º —Ñ–ª–∞–∂–æ–∫
                cell.state = 'hidden';
                cell.isFlag = false;
                cellElement.classList.remove('flag');
                cellElement.dataset.state = 'hidden';
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            cellElement.classList.add('pulse');
            setTimeout(() => cellElement.classList.remove('pulse'), 300);
        }
        
        function cashout() {
            if (!gameActive || !gameStarted || gameFinished) return;
            
            gameFinished = true;
            
            const winAmount = Math.round(currentBet * currentMultiplier);
            balance += winAmount;
            
            updateBalanceDisplay();
            revealAllMines();
            updateGameState();
            
            showNotification(`üéâ –í—ã –∑–∞–±—Ä–∞–ª–∏ ${winAmount} TON! –ú–Ω–æ–∂–∏—Ç–µ–ª—å: ${currentMultiplier.toFixed(2)}x`, 'win');
            endGame(true);
        }
        
        function endGame(isWin) {
            gameActive = false;
            gameStarted = false;
            
            startButton.innerHTML = '<span class="control-icon start-icon"></span>–ù–æ–≤–∞—è –∏–≥—Ä–∞';
            cashoutButton.disabled = true;
            flagButton.disabled = true;
            minesSlider.disabled = false;
            flagButton.classList.remove('active');
            flagMode = false;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            saveGameResult(isWin);
            
            // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–≥—Ä—É
            localStorage.removeItem('minesGame');
        }
        
        function resetGame() {
            gameActive = false;
            gameStarted = false;
            gameFinished = false;
            openedCells = 0;
            currentMultiplier = 1.0;
            flagMode = false;
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–≤–∫—É, –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å
            if (!gameStarted) {
                balance += currentBet;
                updateBalanceDisplay();
            }
            
            createGrid();
            updateGameState();
            updatePotentialWin();
            
            startButton.innerHTML = '<span class="control-icon start-icon"></span>–ù–∞—á–∞—Ç—å –∏–≥—Ä—É';
            cashoutButton.disabled = true;
            flagButton.disabled = false;
            minesSlider.disabled = false;
            flagButton.classList.remove('active');
            
            // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–≥—Ä—É
            localStorage.removeItem('minesGame');
            
            showNotification('–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞', 'info');
        }
        
        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function revealAllMines() {
            for (let i = 0; i < totalCells; i++) {
                const cell = gridState[i];
                const cellElement = minesGrid.children[i];
                
                if (cell.isMine && cell.state !== 'mine') {
                    cell.state = 'mine';
                    cellElement.classList.add('mine', 'revealed');
                    cellElement.dataset.state = 'mine';
                    
                    if (cell.state !== 'opened') {
                        setTimeout(() => {
                            cellElement.classList.add('opened');
                        }, 100 * i);
                    }
                }
            }
        }
        
        function updateMinesDisplay() {
            minesDisplay.innerHTML = '';
            
            for (let i = 0; i < 24; i++) {
                const indicator = document.createElement('div');
                indicator.className = 'mine-indicator';
                if (i < minesCount) {
                    indicator.classList.add('active');
                }
                minesDisplay.appendChild(indicator);
            }
        }
        
        function updateMultiplierInfo() {
            const multiplier = MULTIPLIERS[minesCount];
            multiplierPerCellEl.textContent = multiplier.toFixed(2) + 'x';
            const safeCells = totalCells - minesCount;
            safeCellsEl.textContent = safeCells;
        }
        
        function updateGameState() {
            cellsOpenedEl.textContent = openedCells;
            currentMultiplierEl.textContent = currentMultiplier.toFixed(2) + 'x';
            updatePotentialWin();
        }
        
        function updatePotentialWin() {
            const potentialWin = Math.round(currentBet * currentMultiplier);
            potentialWinEl.textContent = potentialWin + ' TON';
        }
        
        function updateBalanceDisplay() {
            balanceAmount.textContent = balance + ' TON';
            localStorage.setItem('balance', balance);
        }
        
        function saveGameState() {
            if (gameActive) {
                const gameState = {
                    gameActive,
                    gameStarted,
                    minesCount,
                    currentBet,
                    openedCells,
                    currentMultiplier,
                    mines,
                    gridState
                };
                localStorage.setItem('minesGame', JSON.stringify(gameState));
            }
        }
        
        function saveGameResult(isWin) {
            const gameResults = JSON.parse(localStorage.getItem('minesGameResults')) || [];
            const result = {
                timestamp: Date.now(),
                bet: currentBet,
                win: isWin,
                multiplier: currentMultiplier,
                amount: Math.round(currentBet * currentMultiplier),
                mines: minesCount,
                cellsOpened: openedCells
            };
            
            gameResults.push(result);
            localStorage.setItem('minesGameResults', JSON.stringify(gameResults));
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(0)';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(-100px)';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }
        
        // ==================== –ó–ê–ü–£–°–ö ====================
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
